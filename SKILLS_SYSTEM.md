# Система навыков D&D 5e

## Обзор

Система навыков в D&D 5e позволяет персонажам получать владение определенными навыками, что дает бонус к проверкам характеристик. Навыки персонажа определяются его классом и предысторией.

## Правила выбора навыков

### 1. Навыки от класса
- Каждый класс предоставляет список доступных навыков
- Игрок выбирает определенное количество навыков из этого списка (обычно 2-4)
- Выбранные навыки становятся владениями персонажа

### 2. Навыки от предыстории
- Каждая предыстория предоставляет 2 навыка
- Эти навыки автоматически становятся владениями персонажа
- Если навык предыстории совпадает с навыком класса, игрок может выбрать другой навык

### 3. Валидация выбора
- Количество выбранных навыков должно точно соответствовать требованиям класса
- Все выбранные навыки должны быть доступны для класса
- Дублирование с навыками предыстории разрешено, но не рекомендуется

## Реализованные классы и их навыки

### Воин (Fighter)
- **Доступные навыки:** Акробатика, Атлетика, История, Проницательность, Запугивание, Восприятие, Выживание
- **Количество на выбор:** 2
- **Рекомендации:** Атлетика, Запугивание

### Волшебник (Wizard)
- **Доступные навыки:** Магия, История, Проницательность, Анализ, Медицина, Религия
- **Количество на выбор:** 2
- **Рекомендации:** Магия, Анализ

### Разбойник (Rogue)
- **Доступные навыки:** Акробатика, Атлетика, Обман, Проницательность, Запугивание, Анализ, Восприятие, Выступление, Убеждение, Ловкость рук, Скрытность
- **Количество на выбор:** 4
- **Рекомендации:** Скрытность, Ловкость рук

### Жрец (Cleric)
- **Доступные навыки:** История, Проницательность, Медицина, Убеждение, Религия
- **Количество на выбор:** 2
- **Рекомендации:** Проницательность, Религия

### Следопыт (Ranger)
- **Доступные навыки:** Уход за животными, Атлетика, Проницательность, Анализ, Природа, Восприятие, Скрытность, Выживание
- **Количество на выбор:** 3
- **Рекомендации:** Выживание, Восприятие

### Варвар (Barbarian)
- **Доступные навыки:** Уход за животными, Атлетика, Запугивание, Природа, Восприятие, Выживание
- **Количество на выбор:** 2
- **Рекомендации:** Атлетика, Выживание

### Бард (Bard)
- **Доступные навыки:** Акробатика, Уход за животными, Магия, Атлетика, Обман, История, Проницательность, Запугивание, Анализ, Медицина, Природа, Восприятие, Выступление, Убеждение, Религия, Ловкость рук, Скрытность, Выживание
- **Количество на выбор:** 3
- **Рекомендации:** Выступление, Убеждение

### Друид (Druid)
- **Доступные навыки:** Магия, Уход за животными, Проницательность, Медицина, Природа, Восприятие, Религия, Выживание
- **Количество на выбор:** 2
- **Рекомендации:** Природа, Выживание

### Монах (Monk)
- **Доступные навыки:** Акробатика, Атлетика, История, Проницательность, Религия, Скрытность
- **Количество на выбор:** 2
- **Рекомендации:** Акробатика, Скрытность

### Паладин (Paladin)
- **Доступные навыки:** Атлетика, Проницательность, Запугивание, Медицина, Убеждение, Религия
- **Количество на выбор:** 2
- **Рекомендации:** Проницательность, Религия

### Чародей (Sorcerer)
- **Доступные навыки:** Магия, Обман, Проницательность, Запугивание, Убеждение, Религия
- **Количество на выбор:** 2
- **Рекомендации:** Магия, Обман

### Колдун (Warlock)
- **Доступные навыки:** Магия, Обман, История, Запугивание, Анализ, Природа, Религия
- **Количество на выбор:** 2
- **Рекомендации:** Магия, Обман

## Реализованные предыстории и их навыки

### Послушник (Acolyte)
- **Навыки:** Проницательность, Религия

### Преступник (Criminal)
- **Навыки:** Обман, Скрытность

### Народный герой (Folk Hero)
- **Навыки:** Уход за животными, Выживание

### Благородный (Noble)
- **Навыки:** История, Убеждение

### Мудрец (Sage)
- **Навыки:** Магия, История

### Солдат (Soldier)
- **Навыки:** Атлетика, Запугивание

### Бродяга (Urchin)
- **Навыки:** Ловкость рук, Скрытность

## API эндпоинты

### Валидация выбора навыков
```
POST /api/games/character-creation/validate-skills
```
**Тело запроса:**
```json
{
  "characterClass": "fighter",
  "background": "soldier",
  "skillChoices": ["athletics", "intimidation"]
}
```

**Ответ:**
```json
{
  "isValid": true,
  "errors": [],
  "warnings": ["Следующие навыки уже получены от предыстории: intimidation"]
}
```

### Получение доступных навыков класса
```
GET /api/games/character-creation/available-skills?characterClass=fighter&background=soldier
```

**Ответ:**
```json
{
  "availableSkills": ["acrobatics", "athletics", "history", "insight", "perception", "survival"],
  "backgroundSkills": ["athletics", "intimidation"],
  "requiredChoices": 2,
  "classSkills": ["acrobatics", "athletics", "history", "insight", "intimidation", "perception", "survival"]
}
```

### Получение рекомендаций по навыкам
```
GET /api/games/character-creation/skill-recommendations?characterClass=fighter&background=soldier
```

**Ответ:**
```json
{
  "recommendedSkills": ["athletics"],
  "reasoning": [
    "Атлетика полезна для воина в бою и преодолении препятствий",
    "Запугивание помогает в социальных взаимодействиях"
  ]
}
```

## Методы сервиса

### validateSkillChoices(characterClass, background, skillChoices)
Проверяет валидность выбора навыков.

### getAvailableClassSkills(characterClass, background)
Возвращает доступные навыки класса с учетом навыков предыстории.

### getSkillRecommendations(characterClass, background)
Возвращает рекомендации по выбору навыков для класса.

### getCharacterSkillsInfo(characterClass, background, skillChoices)
Возвращает полную информацию о навыках персонажа.

### determineCharacterSkills(characterClass, background, skillChoices)
Определяет финальный список навыков персонажа.

## Использование во фронтенде

### Обновление доступных навыков
```typescript
const updateAvailableSkills = async () => {
  const response = await fetch(`/api/games/character-creation/available-skills?characterClass=${characterClass}&background=${background}`);
  const skillsInfo = await response.json();
  setAvailableSkills(skillsInfo.availableSkills);
  setRequiredSkillChoices(skillsInfo.requiredChoices);
};
```

### Валидация выбора
```typescript
const validateSkills = async () => {
  const response = await fetch('/api/games/character-creation/validate-skills', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ characterClass, background, skillChoices })
  });
  const validation = await response.json();
  return validation.isValid;
};
```

## Примеры использования

### Создание воина с предысторией солдата
1. Класс: Воин (2 навыка на выбор)
2. Предыстория: Солдат (Атлетика, Запугивание)
3. Доступные навыки класса: Акробатика, История, Проницательность, Восприятие, Выживание
4. Рекомендуемый выбор: История, Восприятие
5. Финальные навыки: Атлетика, Запугивание (от предыстории) + История, Восприятие (от класса)

### Создание разбойника с предысторией преступника
1. Класс: Разбойник (4 навыка на выбор)
2. Предыстория: Преступник (Обман, Скрытность)
3. Доступные навыки класса: Акробатика, Атлетика, Проницательность, Запугивание, Анализ, Восприятие, Выступление, Убеждение, Ловкость рук
4. Рекомендуемый выбор: Акробатика, Анализ, Восприятие, Ловкость рук
5. Финальные навыки: Обман, Скрытность (от предыстории) + Акробатика, Анализ, Восприятие, Ловкость рук (от класса) 